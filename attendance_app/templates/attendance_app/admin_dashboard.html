{% extends 'attendance_app/base.html' %}

{% block content %}
  <h2>Admin Dashboard</h2>
  <p>Viewing attendance report for: <strong>{{ selected_date }}</strong></p>

  <form method="get" class="mb-3">
    <div class="row">
      <div class="col-md-4">
        <label for="date-picker" class="form-label">Select Date:</label>
        <input type="date" id="date-picker" name="date" 
               value="{{ selected_date|date:'Y-m-d' }}" class="form-control">
      </div>
      <div class="col-md-2">
        <button type="submit" class="btn btn-primary" style="margin-top: 32px;">Go</button>
      </div>
    </div>
  </form>

  <hr>

  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Daily Report</h5>
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">Employee ID</th>
            <th scope="col">Name</th>
            <th scope="col">Status</th>
            <th scope="col">Check In</th>
            <th scope="col">Check Out</th>
            <th scope="col">Actions</th> </tr>
          </tr>
        </thead>
        <tbody>
          {% for record in attendance_list %}
          <tr>
            <td>{{ record.employee.employee_id }}</td>
            <td>{{ record.employee.user.get_full_name|default:record.employee.user.username }}</td>
            <td>
              {% if record.status == 'PRESENT' %}
                <span class="badge bg-success">Present</span>
              {% elif record.status == 'ABSENT' %}
                <span class="badge bg-danger">Absent</span>
              {% else %}
                <span class="badge bg-info">{{ record.status }}</span>
              {% endif %}
            </td>
            <td>{{ record.check_in|default:"---" }}</td>
            <td>{{ record.check_out|default:"---" }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-center text-muted">No employees found.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

{% endblock %}